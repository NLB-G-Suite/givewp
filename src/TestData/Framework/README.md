# Test Data Framework

## Factories and Seeders

The boundary between Factories and Seeders exists in order to separate the  concerns of creating and persisting data, respectively.

**Factories** creates the definition of the data being generated.

**Seeders** control how the data generated by the factory is used, generally by inserting the data into a database or building an export.

How the data is used is a separate concern from how the data is generated. As an example, a factory can be used to generate donation data (a data structure that has specific requirements) while there may be a database seeder for populating a WordPress installation in addition to an export seeder which may format a static file to be imported at a later time. Maintaining the boundary between data creation and storage allows for different applications of the same information.

## Providers

Providers are encapsulated wrappers for domain specific random data generators. While a library generates fake data of generic types (ie names, emails, numbers), the domain application has specific data types that wrap these generic types.

For example, `Provider\RandomAmount` wraps the `randomElement` generic to return, randomly, an amount from a pre-selected list. This mirrors the donation amount tiers in GiveWP. As opposed to generating a random number for the donation amount, it is more realistic that donations are made in known quantities matching a tier amount.

Each provider has a single responsibility, a single data type or collection, that it generates on command. This is implemented on the `Provider\ProviderContract` interface, which enforces the `__invoke()` method for a Provider, which allows a Factory to call a loaded provider class as a function call.

Providers are available to Factories via the `ProviderForwarder` trait, which is implemented in the abstract factory class, and is inherited by factory implementations. The `ProviderForwarder` introduces a magic method to forward calls for provider data to the appropriate provider class, which is automatically loaded as needed.

Note: Because the `ProviderForwarder` implements autoloading, it is not necessary to explicity register providers.

```php
class ExampleFactory extends Framework\Factory {
    public function definition() {
        return [
            'foo' => $this->randomAttribute(), // where RandomAttribute is a class in .../Framework/Providers/
        ]
    }
}
```
